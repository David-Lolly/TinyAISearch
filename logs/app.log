INFO (2025-08-19 16:36:53): Google search enabled, required key 'google_api_key' found with value: 'AIzaSyAFqqMEQPcjyP0fmZhUh6HWrJG5oZ2x7bI' (Line: 83 [config_manager.py])
INFO (2025-08-19 16:36:53): Google search enabled, required key 'google_cse_id' found with value: 'b25cbdf4436e64319' (Line: 83 [config_manager.py])
INFO (2025-08-19 16:36:53): Final configured status: True (Line: 87 [config_manager.py])
INFO (2025-08-19 16:36:53): ç”¨æˆ·æ¶ˆæ¯å·²æ·»åŠ è‡³ä¼šè¯ af76f4b7-f3b4-40ef-bcee-e111d278db47 (Line: 256 [AISearchServer.py])
INFO (2025-08-19 16:36:53): å¤„ç†åçš„å†å²è®°å½•: [] (Line: 258 [AISearchServer.py])
INFO (2025-08-19 16:36:53): response_stage_messages:[
  {
    "role": "system",
    "content": "ä½ æ˜¯AIæœç´¢åŠ©æ‰‹ï¼Œåå­—å«åšTinyAISearchï¼Œç”±ä¹ä¹å¼€å‘ï¼Œ{{current_date}}ã€‚è¯·æ ¹æ®ä½ å’Œç”¨æˆ·çš„èŠå¤©è®°å½•ï¼Œä»¥åŠå½“å‰ç”¨æˆ·çš„é—®é¢˜ï¼Œå……åˆ†ç†è§£ç”¨æˆ·æ„å›¾ï¼Œè¿›è¡Œå›ç­”ã€‚"
  },
  {
    "role": "user",
    "content": "hi"
  }
] (Line: 39 [response.py])
INFO (2025-08-19 16:36:53): å¼€å§‹è°ƒç”¨LLM API... (Line: 49 [response.py])
INFO (2025-08-19 16:36:54): LLM APIè°ƒç”¨å®Œæˆï¼Œè€—æ—¶: 0.61ç§’ (Line: 62 [response.py])
INFO (2025-08-19 16:36:54): æ”¶åˆ°ç¬¬ä¸€ä¸ªchunkï¼Œæ€»è€—æ—¶: 0.61ç§’ (Line: 67 [response.py])
ERROR (2025-08-19 16:36:54): Error extracting content from chunk: list index out of range (Line: 76 [response.py])
INFO (2025-08-19 16:36:54): æµå¼å“åº”å®Œæˆï¼Œæ€»å…±å¤„ç†äº†11ä¸ªchunks (Line: 78 [response.py])
INFO (2025-08-19 16:37:26): Google search enabled, required key 'google_api_key' found with value: 'AIzaSyAFqqMEQPcjyP0fmZhUh6HWrJG5oZ2x7bI' (Line: 83 [config_manager.py])
INFO (2025-08-19 16:37:26): Google search enabled, required key 'google_cse_id' found with value: 'b25cbdf4436e64319' (Line: 83 [config_manager.py])
INFO (2025-08-19 16:37:26): Final configured status: True (Line: 87 [config_manager.py])
INFO (2025-08-19 16:37:26): ç”¨æˆ·æ¶ˆæ¯å·²æ·»åŠ è‡³ä¼šè¯ af76f4b7-f3b4-40ef-bcee-e111d278db47 (Line: 256 [AISearchServer.py])
INFO (2025-08-19 16:37:26): å¤„ç†åçš„å†å²è®°å½•: [{'role': 'user', 'content': 'hi', 'timestamp': '2025-08-19 08:36:53'}, {'role': 'assistant', 'content': 'ä½ å¥½ï¼æˆ‘æ˜¯TinyAISearchï¼Œç”±ä¹ä¹å¼€å‘ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼ŸğŸ˜Š'}] (Line: 258 [AISearchServer.py])
INFO (2025-08-19 16:37:26): å‡†å¤‡æœç´¢.... (Line: 275 [AISearchServer.py])
INFO (2025-08-19 16:37:26): search_stage_prompt: [
  {
    "role": "system",
    "content": "\n        # PROMPT: Expert-Level Search Strategy Generation System\n\n        ## [CONTEXT]\n\n        You are a core intelligent module integrated into a complex information retrieval system (RAG). Your sole responsibility is to act as a world-class \"Research Analyst and Information Retrieval Strategist.\" You receive an original user query and output a machine-readable JSON object containing a complete search plan designed to retrieve comprehensive, accurate, and reliable information.\n\n        **Search Engine Characteristics:**\n\n        * **Baidu**: Excels at handling queries in a Chinese context, especially for lifestyle and current-event content like news, weather, locations, people, and travel.\n        * **DuckDuckGo**: Excels at handling global English queries, providing higher-quality information in professional and complex domains like technology, academia, and programming.\n\n        **Core Objective:**\n        Your output is not just a list of keywords, but a complete strategy. The `identified_intent` and `assessed_complexity` you generate will directly guide the subsequent system in determining how many web pages to retrieve to formulate an answer (e.g., fewer pages for simple questions, more pages for complex ones).\n\n        ## [PERSONA]\n\n        You are an information scientist and intelligence analyst with 20 years of experience. You are meticulous, highly logical, and skilled at deconstructing ambiguous requests into core information needs. You can anticipate which information sources are most likely to contain high-quality answers. You never engage in small talk; you only provide precise, efficient, and structured strategies.\n\n        ## [CORE DIRECTIVE]\n\n        Based on the user input , current date and the history you talk with user below, strictly follow the `[WORKFLOW]` and return the result in the format defined by `[OUTPUT_SCHEMA]`.\n\n\n        ## [CURRENT_DATE]\n        2025-08-19\n\n\n        ## [WORKFLOW]\n\n        **1. Phase 1: Deconstruct & Analyze**\n\n        * **1.1. Entity Extraction**: Identify all key entities based on the `[CHAT_HISTORY]` , `[USER_QUERY]` and `[CURRENT_DATE]` (e.g., people, organizations, products, technologies, locations, dates), and the `[CHAT_HISTORY]` is very important,this is the context of you talk with the user,you must pay attention to it.\n\n        * **1.2. Intent Classification & Complexity Assessment**:\n\n            * First, select the **one** most appropriate intent from the **Intent Classification List** below.\n            * Then, based on the selected intent and query details, assess its complexity as `[Simple]`, `[Moderate]`, or `[Complex]`.\n\n            **Intent Classification List:**\n\n            * `[Specific_Fact_Lookup]`: Seeks a single, objective fact. The answer is typically unique and concise (e.g., weather, stock prices, dates, definitions). **Complexity: [Simple]**\n            * `[Current_Event_Reporting]`: Asks about recent or ongoing events and news. Requires gathering information from multiple news sources. **Complexity: [Moderate]**\n            * `[How-To_Instruction]`: Seeks specific steps or a guide to complete a task. **Complexity: [Moderate]**\n            * `[Troubleshooting_Solution]`: Seeks a solution for a specific problem or error. **Complexity: [Moderate]**\n            * `[Concept_Explanation]`: Requires a deep, comprehensive explanation of a concept, theory, or technology. **Complexity: [Complex]**\n            * `[Comparative_Analysis]`: Compares two or more subjects, analyzing their pros, cons, and differences. **Complexity: [Complex]**\n            * `[Opinion_Review_Gathering]`: Collects subjective evaluations and reviews on a topic, product, or service. **Complexity: [Complex]**\n\n        * **1.3. Keyword Synthesis**: Distill the 1-3 most central keyword combinations.\n\n        * **1.4. Implicit Questions**: Identify underlying questions. For the `[Specific_Fact_Lookup]` intent, this should be an empty list.\n\n        **2. Phase 2: Strategic Query Formulation**\n\n        * The number and depth of queries are determined by the `assessed_complexity`.\n        * **[Simple] Complexity**:\n            * **Foundational Queries**: Construct 1-2 direct queries. Prioritize the search engine best suited for the query type.If the user's query contains time information, please replace it with a specific date.\n            * **Expansion & Deep-Dive Queries**: Not required; return an empty list `[]`.\n        * **[Moderate] Complexity**:\n            * **Foundational Queries**: Construct 2-3 core queries. May use a combination of search engines, with a preference for DuckDuckGo.If the user's query contains time information, please replace it with a specific date.\n            * **Expansion & Deep-Dive Queries**: Construct 2-3 expansion queries to explore related information. These must be in the same language as the user's query.\n        * **[Complex] Complexity**:\n            * **Foundational Queries**: Construct 2-3 core queries. Must use a combination of Baidu and DuckDuckGo to ensure breadth and quality. (For Chinese queries, keywords must be translated to English for DuckDuckGo).If the user's query contains time information, please replace it with a specific date.\n            * **Expansion & Deep-Dive Queries**: Construct 3-5 deep-dive queries to explore various perspectives (e.g., pros/cons, future trends, alternatives, case studies). These must be in the same language as the user's query.\n\n        ## [OUTPUT_SCHEMA]\n\n        **Your final output must be a perfectly formatted JSON object, with no comments or explanations outside the JSON structure.**\n\n        {\n        \"query_analysis\": {\n            \"original_query\": \"[Original user query]\",\n            \"identified_intent\": \"[Selected intent from the classification list]\",\n            \"assessed_complexity\": \"[Simple/Moderate/Complex]\",\n            \"key_entities\": [\"Entity 1\", \"Entity 2\"],\n            \"implicit_questions\": [\"Implicit question 1\", \"Implicit question 2\"]\n        },\n        \"search_plan\": {\n            \"foundational_queries\": [\n            {\"query\": \"[Query A1]\", \"engine\": \"[Search Engine A1]\"},\n            {\"query\": \"[Query A2]\", \"engine\": \"[Search Engine A2]\"}\n            ],\n            \"expansion_deep_dive_queries\": [\n            \"[Query B1]\",\n            \"[Query B2]\",\n            \"[Query B3]\"\n            ]\n        }\n        }\n\n\n        ## Examples\n\n        ### eg1:\n\n        **User Input:** 2025-08-16æ­¦æ±‰å¤©æ°”å¦‚ä½•ï¼Ÿ\n\n        **Output:**\n\n        {\n        \"query_analysis\": {\n            \"original_query\": \"2025-08-16æ­¦æ±‰å¤©æ°”å¦‚ä½•ï¼Ÿ\",\n            \"identified_intent\": \"[Specific_Fact_Lookup]\",\n            \"assessed_complexity\": \"[Simple]\",\n            \"key_entities\": [\"8æœˆ16æ—¥æ­¦æ±‰å¤©æ°”\"],\n            \"implicit_questions\": []\n        },\n        \"search_plan\": {\n            \"foundational_queries\": [\n            {\"query\": \"8æœˆ16æ—¥æ­¦æ±‰å¤©æ°”é¢„æŠ¥\", \"engine\": \"baidu\"}\n            ],\n            \"expansion_deep_dive_queries\": []\n        }\n        }\n\n        ### eg2:\n\n        **User Input:** è¯·è§£é‡Šä¸€ä¸‹åœ¨å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹æ—¶ï¼ŒLoRAæŠ€æœ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒç›¸æ¯”äºå…¨é‡å¾®è°ƒçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ\n\n        **Output:**\n\n        {\n        \"query_analysis\": {\n            \"original_query\": \"è¯·è§£é‡Šä¸€ä¸‹åœ¨å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹æ—¶ï¼ŒLoRAæŠ€æœ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒç›¸æ¯”äºå…¨é‡å¾®è°ƒçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ\",\n            \"identified_intent\": \"[Comparative_Analysis]\",\n            \"assessed_complexity\": \"[Complex]\",\n            \"key_entities\": [\"LoRA\", \"å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒ\", \"å…¨é‡å¾®è°ƒ\"],\n            \"implicit_questions\": [\"LoRAæŠ€æœ¯çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ?\", \"LoRAé€‚ç”¨äºå“ªäº›åœºæ™¯?\", \"LoRAå’Œå…¨é‡å¾®è°ƒçš„è®­ç»ƒæˆæœ¬å¯¹æ¯”\"]\n        },\n        \"search_plan\": {\n            \"foundational_queries\": [\n            {\"query\": \"LoRA technology working principle for LLM fine-tuning\", \"engine\": \"duckduckgo\"},\n            {\"query\": \"LoRA vs full fine-tuning pros and cons\", \"engine\": \"duckduckgo\"},\n            {\"query\": \"LoRAæŠ€æœ¯åŸç†ä¸ä¼˜åŠ¿\", \"engine\": \"baidu\"}\n            ],\n            \"expansion_deep_dive_queries\": [\n            \"å¤§å‹è¯­è¨€æ¨¡å‹çš„ä½ç§©é€‚åº”è¯¦è§£\",\n            \"é¢å‘å¤§è¯­è¨€æ¨¡å‹çš„ LoRA å®ç°æŒ‡å—\",\n            \"LoRA çš„ç¼ºç‚¹ä¸å±€é™æ€§\",\n            \"LoRA å¾®è°ƒæ€§èƒ½åŸºå‡†æµ‹è¯•\"\n            ]\n        }\n        }\n\n        ### eg3:\n\n        **User Input:** How to make tiramisu at home?\n\n        **Output:**\n        {\n        \"query_analysis\": {\n            \"original_query\": \"How to make tiramisu at home?\",\n            \"identified_intent\": \"[How-To_Instruction]\",\n            \"assessed_complexity\": \"[Moderate]\",\n            \"key_entities\": [\"tiramisu\", \"homemade recipe\"],\n            \"implicit_questions\": [\"What ingredients are needed for authentic tiramisu?\", \"What are common mistakes to avoid when making tiramisu?\"]\n        },\n        \"search_plan\": {\n            \"foundational_queries\": [\n            {\n                \"query\": \"easy tiramisu recipe for beginners\", \n                \"engine\": \"duckduckgo\"\n            },\n            {\n                \"query\": \"authentic tiramisu recipe step by step\", \n                \"engine\": \"duckduckgo\"\n            }\n            ],\n            \"expansion_deep_dive_queries\": [\n            \"tiramisu recipe without raw eggs\",\n            \"best ladyfingers for tiramisu\",\n            \"common tiramisu mistakes and how to fix them\"\n            ]\n        }\n        }\n        "
  },
  {
    "role": "user",
    "content": "hi"
  },
  {
    "role": "assistant",
    "content": "ä½ å¥½ï¼æˆ‘æ˜¯TinyAISearchï¼Œç”±ä¹ä¹å¼€å‘ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼ŸğŸ˜Š"
  },
  {
    "role": "user",
    "content": "æœªæ¥7å¤©æ­¦æ±‰å¤©æ°”"
  }
] (Line: 217 [keywords_extract.py])
INFO (2025-08-19 16:37:30): search_plan_data:{
  "query_analysis": {
    "original_query": "æœªæ¥7å¤©æ­¦æ±‰å¤©æ°”",
    "identified_intent": "[Current_Event_Reporting]",
    "assessed_complexity": "[Moderate]",
    "key_entities": [
      "æ­¦æ±‰",
      "æœªæ¥7å¤©",
      "å¤©æ°”"
    ],
    "implicit_questions": [
      "æ­¦æ±‰æ¥ä¸‹æ¥ä¸€å‘¨çš„å¤©æ°”å˜åŒ–è¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ",
      "æ­¦æ±‰æœªæ¥7å¤©æ˜¯å¦æœ‰é™é›¨æˆ–é«˜æ¸©é¢„è­¦ï¼Ÿ"
    ]
  },
  "search_plan": {
    "foundational_queries": [
      {
        "query": "æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥",
        "engine": "baidu"
      },
      {
        "query": "Wuhan 7-day weather forecast",
        "engine": "duckduckgo"
      }
    ],
    "expansion_deep_dive_queries": [
      "æ­¦æ±‰æœªæ¥ä¸€å‘¨æ°”æ¸©å˜åŒ–è¶‹åŠ¿",
      "æ­¦æ±‰æœªæ¥7å¤©æ˜¯å¦ä¼šæœ‰å¼ºé™é›¨",
      "æ­¦æ±‰æœªæ¥ä¸€å‘¨ç©ºæ°”è´¨é‡é¢„æµ‹"
    ]
  }
} (Line: 128 [search_web.py])
INFO (2025-08-19 16:37:30): Baiduæœç´¢ 'æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥' (Line: 146 [search_web.py])
INFO (2025-08-19 16:37:30): DuckDuckGoæœç´¢ 'Wuhan 7-day weather forecast' (Line: 149 [search_web.py])
INFO (2025-08-19 16:37:31): response: https://html.duckduckgo.com/html 202 (Line: 464 [lib.rs])
INFO (2025-08-19 16:37:33): response: https://lite.duckduckgo.com/lite/ 202 (Line: 464 [lib.rs])
WARNING (2025-08-19 16:37:33): DuckDuckGoæœç´¢ 'Wuhan 7-day weather forecast' æ—¶å‡ºé”™: https://lite.duckduckgo.com/lite/ 202 Ratelimit. å°†å›é€€åˆ°Googleæœç´¢ã€‚ (Line: 68 [search_web.py])
INFO (2025-08-19 16:37:33): Googleæœç´¢ 'Wuhan 7-day weather forecast' (Line: 90 [search_web.py])
ERROR (2025-08-19 16:37:35): Skipping invalid link for query 'æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥': /s?wd=%E6%AD%A6%E6%B1%89%E6%9C%AA%E6%9D%A5%E4%B8%83%E5%A4%A9%E5%A4%A9%E6%B0%94&usm=1&ie=utf-8&rsv_pq=bcb5d825004ddfa9&oq=%E6%AD%A6%E6%B1%89%E6%9C%AA%E6%9D%A57%E5%A4%A9%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5&rsv_t=30876nsxghdGIhCdV%2Bk%2BUkhBrF0MTsxr7boJie3f5b4PriKjVn3a21NblfU&rsf=101633403&rsv_dl=0_prs_28608_1 (Line: 149 [crawl_web.py])
INFO (2025-08-19 16:37:35): Detected encoding for https://tianqi.eastday.com/wuhan/30/: utf-8 (confidence: 0.99) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for https://baidu.weather.com.cn/mweather/101200101.shtml: UTF-8-SIG (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for http://m.src.weather.com.cn/mweather15d/101200101.shtml: UTF-8-SIG (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for http://waptianqi.2345.com/wuhan-57494.htm#!/stealingyourhistory: GB2312 (confidence: 0.99) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for https://tianqi.eastday.com/wuhan/7/: utf-8 (confidence: 0.99) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for http://uc.weather.com.cn/mweather15d/101200101.shtml: UTF-8-SIG (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for https://weathernew.pae.baidu.com/weathernew/pc?query=%E6%B9%96%E5%8C%97%E6%AD%A6%E6%B1%89%E5%A4%A9%E6%B0%94&srcid=4982&forecast=long_day_forecast: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Detected encoding for http://uc.weather.com.cn/mweather/101200101.shtml: UTF-8-SIG (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:36): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:36): ruthless removal did not work.  (Line: 231 [readability.py])
INFO (2025-08-19 16:37:36): Readability extraction failed, using body tag for https://weathernew.pae.baidu.com/weathernew/pc?query=%E6%B9%96%E5%8C%97%E6%AD%A6%E6%B1%89%E5%A4%A9%E6%B0%94&srcid=4982&forecast=long_day_forecast (Line: 113 [crawl_web.py])
WARNING (2025-08-19 16:37:36): Text validity check failed for https://weathernew.pae.baidu.com/weathernew/pc?query=%E6%B9%96%E5%8C%97%E6%AD%A6%E6%B1%89%E5%A4%A9%E6%B0%94&srcid=4982&forecast=long_day_forecast, attempting encoding fixes (Line: 123 [crawl_web.py])
WARNING (2025-08-19 16:37:36): Content for http://www.baidu.com/link?url=Us0whVZ4hQs1LUBum-qalt3yU1Y7DCRyWReLZewhhjxeNEdPktHvB7vViMjVcOBLvIdCGawK23PWdtdgTXtGRur5Mn_XthWKxLqv9RxAf7f4_Xj4U_ahwP-Mm65kKd7UaU0geNsR0v8SWU-EFs3hHH77XM6oKn5ao2kNXnOy47_a5-DmjnWsn4gLDIzLb1Z40aFJNtMI_4M3pgWtULzLkq is too short or empty after cleaning (Line: 218 [crawl_web.py])
INFO (2025-08-19 16:37:36): Re-decoded HTML with detected encoding: GB2312 (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:37): ruthless removal did not work.  (Line: 231 [readability.py])
INFO (2025-08-19 16:37:37): Re-decoded HTML with detected encoding: UTF-8-SIG (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:37): ruthless removal did not work.  (Line: 231 [readability.py])
WARNING (2025-08-19 16:37:37): Text validity check failed for https://baidu.weather.com.cn/mweather/101200101.shtml, attempting encoding fixes (Line: 123 [crawl_web.py])
WARNING (2025-08-19 16:37:37): Content for http://www.baidu.com/link?url=96GL7r8vrBjIbN3szgrV5QNFeS_6u7ihzgrs2CiGYSQ79dHcGLuOOcwIExTlzzDTLbV3E2sXYgSi53uv-pxWoK is too short or empty after cleaning (Line: 218 [crawl_web.py])
INFO (2025-08-19 16:37:37): Re-decoded HTML with detected encoding: UTF-8-SIG (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:37): ruthless removal did not work.  (Line: 231 [readability.py])
INFO (2025-08-19 16:37:37): Re-decoded HTML with detected encoding: utf-8 (Line: 103 [crawl_web.py])
WARNING (2025-08-19 16:37:37): Text validity check failed for http://uc.weather.com.cn/mweather/101200101.shtml, attempting encoding fixes (Line: 123 [crawl_web.py])
WARNING (2025-08-19 16:37:37): Content for http://www.baidu.com/link?url=Us0whVZ4hQs1LUBum-qal8XiuvPyUjRevSf6S-YBE15PRBokNrSL-gSbo-pft8Q1y0QrWSBXbs7rm5Lj-8yGEq is too short or empty after cleaning (Line: 218 [crawl_web.py])
INFO (2025-08-19 16:37:37): Re-decoded HTML with detected encoding: UTF-8-SIG (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:37): Re-decoded HTML with detected encoding: UTF-8-SIG (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:38): Re-decoded HTML with detected encoding: utf-8 (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:38): Detected encoding for https://m.weather.com.cn/d/town/index?lat=30.594015&lon=114.263496: utf-8 (confidence: 0.99) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:38): Re-decoded HTML with detected encoding: utf-8 (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:38): ruthless removal did not work.  (Line: 231 [readability.py])
WARNING (2025-08-19 16:37:38): Text validity check failed for https://m.weather.com.cn/d/town/index?lat=30.594015&lon=114.263496, attempting encoding fixes (Line: 123 [crawl_web.py])
WARNING (2025-08-19 16:37:38): Content for http://www.baidu.com/link?url=zYrufHSwA_f_zF-ofI-k22-Q2FOUiGrEoo8o77xx-9fKvY5jAqkB7R1Kgpr5OVwtcuEWo5qmBQF1tzDdfrCqUMPeGC5n0ZEUD-yddtorTie is too short or empty after cleaning (Line: 218 [crawl_web.py])
ERROR (2025-08-19 16:37:38): Client error 400 for https://www.sciencedirect.com/science/article/pii/S0147651322007163. Won't retry. (Line: 178 [crawl_web.py])
ERROR (2025-08-19 16:37:39): Client error 403 for https://ehp.niehs.nih.gov/10847. Won't retry. (Line: 178 [crawl_web.py])
INFO (2025-08-19 16:37:39): Detected encoding for https://www.timeanddate.com/weather/china/wuhan/ext: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:39): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:40): Detected encoding for https://www.accuweather.com/en/cn/wuhan/103847/weather-forecast/103847: ISO-8859-1 (confidence: 0.73) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:40): Re-decoded HTML with detected encoding: ISO-8859-1 (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:40): Detected encoding for https://bmcpublichealth.biomedcentral.com/articles/10.1186/s12889-020-10131-7: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:40): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:41): Detected encoding for https://www.bbc.com/weather/1791247: ISO-8859-1 (confidence: 0.73) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:42): Re-decoded HTML with detected encoding: ISO-8859-1 (Line: 103 [crawl_web.py])
WARNING (2025-08-19 16:37:42): HEAD request failed for https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047, will try direct GET: _ssl.c:990: The handshake operation timed out (Line: 174 [crawl_web.py])
INFO (2025-08-19 16:37:43): Detected encoding for https://weather.com/weather/tenday/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8?traffic_source=footerNav_Tenday: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:44): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:44): Detected encoding for https://weather.com/weather/monthly/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:44): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:44): Detected encoding for https://www.nature.com/articles/s41598-018-20318-z: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:45): Detected encoding for https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047: ascii (confidence: 1.0) (Line: 94 [crawl_web.py])
INFO (2025-08-19 16:37:45): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:46): Re-decoded HTML with detected encoding: ascii (Line: 103 [crawl_web.py])
INFO (2025-08-19 16:37:46): crawled_results: {
  "æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥": [
    {
      "id": 2,
      "title": "ã€æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©æŸ¥è¯¢ã€‘-ä¸­å›½å¤©æ°”ç½‘",
      "link": "http://www.baidu.com/link?url=IUe7tGUH7s2AZnwKmaGxLp1bhNiWm8nE0YevtJWcqhEJEZGCx_hRKzudn5Z7PwtOYrENvThHmXTnd7-8zMPc9mBcASvdH6QJKdyK6ph2lEm",
      "content": "815å¤©å¤©æ°”é¢„æŠ¥ï¼Œæ˜¯é›†åˆå¤šå®¶å…¨çƒæ•°å€¼å¤©æ°”é¢„æŠ¥æ¨¡å¼å®¢è§‚é¢„æŠ¥äº§å“åŠ å·¥è€Œæˆï¼Œæœªç»é¢„æŠ¥å‘˜ä¸»è§‚è®¢æ­£ï¼Œåæ˜ æœªæ¥ä¸€æ®µæ—¶é—´å†…å¤©æ°”å˜åŒ–è¶‹åŠ¿ï¼Œå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œä¾›å…¬ä¼—å‚è€ƒï¼Œæ¬²çŸ¥æ›´åŠ å‡†ç¡®çš„å¤©æ°”é¢„æŠ¥éœ€éšæ—¶å…³æ³¨çŸ­æœŸå¤©æ°”é¢„æŠ¥å’Œæœ€æ–°é¢„æŠ¥ä¿¡æ¯æ›´æ–°ã€‚"
    },
    {
      "id": 3,
      "title": "ã€æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©æŸ¥è¯¢ã€‘-ä¸­å›½å¤©æ°”ç½‘",
      "link": "http://www.baidu.com/link?url=TfG-EXLFNRvSBsfm4VRVAMEXl5eyndnw92A4z7_lG0CSPtS0rYkM8gzPrTYTuEw0l3KDd0F-RkZoY99DLOfFfa",
      "content": "815å¤©å¤©æ°”é¢„æŠ¥ï¼Œæ˜¯é›†åˆå¤šå®¶å…¨çƒæ•°å€¼å¤©æ°”é¢„æŠ¥æ¨¡å¼å®¢è§‚é¢„æŠ¥äº§å“åŠ å·¥è€Œæˆï¼Œæœªç»é¢„æŠ¥å‘˜ä¸»è§‚è®¢æ­£ï¼Œåæ˜ æœªæ¥ä¸€æ®µæ—¶é—´å†…å¤©æ°”å˜åŒ–è¶‹åŠ¿ï¼Œå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œä¾›å…¬ä¼—å‚è€ƒï¼Œæ¬²çŸ¥æ›´åŠ å‡†ç¡®çš„å¤©æ°”é¢„æŠ¥éœ€éšæ—¶å…³æ³¨çŸ­æœŸå¤©æ°”é¢„æŠ¥å’Œæœ€æ–°é¢„æŠ¥ä¿¡æ¯æ›´æ–°ã€‚"
    },
    {
      "id": 4,
      "title": "æ­¦æ±‰å¤©æ°”é¢„æŠ¥ä¸€å‘¨,7å¤©,10å¤©,15å¤©,æœªæ¥ä¸€å‘¨å¤©æ°”é¢„æŠ¥æŸ¥è¯¢_2345å¤©æ°”...",
      "link": "http://www.baidu.com/link?url=w9bksBGQLagd8gLb77csdDtAxNCkJivPCnaFe5k5HBspTDuL0TgQmGfaaA1_Skf_r-6LJ6U0VETQBkeSI9tBvo8pI0OHxT4Kp4MVKn3YLB7",
      "content": "ä»Šæ—¥ç”Ÿæ´»æŒ‡æ•° æ— éœ€å¸¦ä¼ å°‘å‘æ„Ÿå†’ ç´«å¤–çº¿å¾ˆå¼º è¾ƒé€‚å®œæ™¨ç»ƒ é€‚å®œæ™¾æ™’ ä¸é€‚å®œé’“é±¼ è¾ƒé€‚å®œæ—…æ¸¸ é«˜æ¸©æ’è¡Œæ¦œ"
    },
    {
      "id": 7,
      "title": "æ­¦æ±‰å¤©æ°”é¢„æŠ¥30å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥30å¤©æŸ¥è¯¢,æ­¦æ±‰æœªæ¥30å¤©å¤©æ°”é¢„æŠ¥...",
      "link": "http://www.baidu.com/link?url=TfG-EXLFNRvSBsfm4VRVAWFU6147uEbDgUVLG-qUd5Ai7YBoUTlMLdibAue8C9Ry",
      "content": "äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816"
    },
    {
      "id": 8,
      "title": "...å¤©æ°”é¢„æŠ¥ä¸€å‘¨,æ­¦æ±‰æœªæ¥ä¸€å‘¨å¤©æ°”,æ­¦æ±‰7å¤©å¤©æ°”é¢„æŠ¥æŸ¥è¯¢ - ä¸œæ–¹å¤©æ°”",
      "link": "http://www.baidu.com/link?url=KYLFmYHJc0hRaD2NwrwSP5WUeMazpz2sMRbXZa2fr__TQUGbIfGhdYqWDTAxzvl1",
      "content": "äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816"
    }
  ],
  "Wuhan 7-day weather forecast": [
    {
      "id": 0,
      "title": "10-Day Weather Forecast for Wuhan, Hubei, People's Republic of ...",
      "link": "https://weather.com/weather/tenday/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8?traffic_source=footerNav_Tenday",
      "content": "Day Chance of a shower or two during the morning, followed by partly cloudy skies in the afternoon. High around 95F. Winds NE at 5 to 10 mph. Chance of rain 30. Night Cloudy with showers. Low near 80F. Winds light and variable. Chance of rain 50."
    },
    {
      "id": 2,
      "title": "Monthly Weather Forecast for Wuhan, Hubei, People's Republic of ...",
      "link": "https://weather.com/weather/monthly/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8",
      "content": "Night Partly cloudy. Low 84F. Winds S at 10 to 15 mph."
    },
    {
      "id": 4,
      "title": "10-day weather forecast for Hongshan District, Hubei, People's ...",
      "link": "https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047",
      "content": "Day Morning showers. High 32C. Winds NNE at 5 to 10 mph. Chance of rain 60. Night Showers late at night. Low 25C. Winds NNE at 5 to 10 mph. Chance of rain 30."
    },
    {
      "id": 5,
      "title": "Wuhan, Hubei, China Weather Forecast | AccuWeather",
      "link": "https://www.accuweather.com/en/cn/wuhan/103847/weather-forecast/103847",
      "content": "Static Radar Temporarily Unavailable Thank you for your patience as we work to get everything up and running again. Refresh Page"
    },
    {
      "id": 6,
      "title": "Quantifying the influence of temperature on hand, foot and mouth ...",
      "link": "https://www.nature.com/articles/s41598-018-20318-z",
      "content": "Chan, K. P. et al . Epidemic hand, foot and mouth disease caused by human enterovirus 71, Singapore. Emerging infectious diseases 9 , 7885, 2003.     Yang, S. et al . Epidemiological features of and changes in incidence of infectious diseases in China in the first decade after the SARS outbreak: an observational trend study. The Lancet. Infectious diseases , 2017. Chong, P., Liu, C. C., Chow, Y. H., Chou, A. H.  Klein, M. Review of enterovirus 71 vaccines. Clinical infectious diseases: an offici..."
    },
    {
      "id": 7,
      "title": "Wuhan, Hubei, China 14 day weather forecast",
      "link": "https://www.timeanddate.com/weather/china/wuhan/ext",
      "content": "Wuhan Extended Forecast with high and low temperatures"
    },
    {
      "id": 8,
      "title": "The association between ambient temperature and mortality of the ...",
      "link": "https://bmcpublichealth.biomedcentral.com/articles/10.1186/s12889-020-10131-7",
      "content": "Jones KE, Patel NG, Levy MA, Storeygard A, Balk D, Gittleman JL, et al. Global trends in emerging infectious diseases. Nature. 2008;4517181:9903. .      Malvy D, McElroy AK, de Clerck H, Gnther S, van Griensven J. Ebola virus disease. Lancet. 2019;39310174:93648. .    Brachman PS. Infectious diseases  past, present, and future. Int J Epidemiol. 2003;325:6846. .    Farrar J. Science, innovation and society: what we need to prepare for the health challenges of the twentyfirst century? Int Health. ..."
    },
    {
      "id": 9,
      "title": "Wuhan - BBC Weather",
      "link": "https://www.bbc.com/weather/1791247",
      "content": "Sunny , 0 chance of precipitation , Wind speed 8 mph 12 kmh SSW 8 mph 12 kmh South South Westerly , More detailsÃ‚"
    }
  ]
} (Line: 267 [crawl_web.py])
INFO (2025-08-19 16:37:46): æ£€ç´¢ç‰ˆæœ¬: v2 (Line: 327 [AISearchServer.py])
INFO (2025-08-19 16:37:46): Embedding all unique queries... (Line: 108 [pages_retrieve.py])
INFO (2025-08-19 16:37:46): Processing 5 pages for query: 'æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥' (Line: 117 [pages_retrieve.py])
INFO (2025-08-19 16:37:46): Calculating embedding similarities... (Line: 120 [pages_retrieve.py])
INFO (2025-08-19 16:37:46): Calculating BM25 similarities... (Line: 125 [pages_retrieve.py])
DEBUG (2025-08-19 16:37:46): Building prefix dict from the default dictionary ... (Line: 113 [__init__.py])
DEBUG (2025-08-19 16:37:46): Loading model from cache C:\Users\ç†Šä¹ä¹\AppData\Local\Temp\jieba.cache (Line: 132 [__init__.py])
DEBUG (2025-08-19 16:37:47): Loading model cost 0.472 seconds. (Line: 164 [__init__.py])
DEBUG (2025-08-19 16:37:47): Prefix dict has been built successfully. (Line: 166 [__init__.py])
INFO (2025-08-19 16:37:47): Sorted pages: [
  {
    "id": 4,
    "title": "æ­¦æ±‰å¤©æ°”é¢„æŠ¥ä¸€å‘¨,7å¤©,10å¤©,15å¤©,æœªæ¥ä¸€å‘¨å¤©æ°”é¢„æŠ¥æŸ¥è¯¢_2345å¤©æ°”...",
    "link": "http://www.baidu.com/link?url=w9bksBGQLagd8gLb77csdDtAxNCkJivPCnaFe5k5HBspTDuL0TgQmGfaaA1_Skf_r-6LJ6U0VETQBkeSI9tBvo8pI0OHxT4Kp4MVKn3YLB7",
    "content": "ä»Šæ—¥ç”Ÿæ´»æŒ‡æ•° æ— éœ€å¸¦ä¼ å°‘å‘æ„Ÿå†’ ç´«å¤–çº¿å¾ˆå¼º è¾ƒé€‚å®œæ™¨ç»ƒ é€‚å®œæ™¾æ™’ ä¸é€‚å®œé’“é±¼ è¾ƒé€‚å®œæ—…æ¸¸ é«˜æ¸©æ’è¡Œæ¦œ",
    "embedding_score": 0.22863875738387213,
    "bm25_score": 0.2512857251872719,
    "combined_score": 0.35428161997750807
  },
  {
    "id": 8,
    "title": "...å¤©æ°”é¢„æŠ¥ä¸€å‘¨,æ­¦æ±‰æœªæ¥ä¸€å‘¨å¤©æ°”,æ­¦æ±‰7å¤©å¤©æ°”é¢„æŠ¥æŸ¥è¯¢ - ä¸œæ–¹å¤©æ°”",
    "link": "http://www.baidu.com/link?url=KYLFmYHJc0hRaD2NwrwSP5WUeMazpz2sMRbXZa2fr__TQUGbIfGhdYqWDTAxzvl1",
    "content": "äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816",
    "embedding_score": 0.19892521563299026,
    "bm25_score": 0.22408573010825664,
    "combined_score": 0.31096808068711856
  },
  {
    "id": 2,
    "title": "ã€æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©æŸ¥è¯¢ã€‘-ä¸­å›½å¤©æ°”ç½‘",
    "link": "http://www.baidu.com/link?url=IUe7tGUH7s2AZnwKmaGxLp1bhNiWm8nE0YevtJWcqhEJEZGCx_hRKzudn5Z7PwtOYrENvThHmXTnd7-8zMPc9mBcASvdH6QJKdyK6ph2lEm",
    "content": "815å¤©å¤©æ°”é¢„æŠ¥ï¼Œæ˜¯é›†åˆå¤šå®¶å…¨çƒæ•°å€¼å¤©æ°”é¢„æŠ¥æ¨¡å¼å®¢è§‚é¢„æŠ¥äº§å“åŠ å·¥è€Œæˆï¼Œæœªç»é¢„æŠ¥å‘˜ä¸»è§‚è®¢æ­£ï¼Œåæ˜ æœªæ¥ä¸€æ®µæ—¶é—´å†…å¤©æ°”å˜åŒ–è¶‹åŠ¿ï¼Œå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œä¾›å…¬ä¼—å‚è€ƒï¼Œæ¬²çŸ¥æ›´åŠ å‡†ç¡®çš„å¤©æ°”é¢„æŠ¥éœ€éšæ—¶å…³æ³¨çŸ­æœŸå¤©æ°”é¢„æŠ¥å’Œæœ€æ–°é¢„æŠ¥ä¿¡æ¯æ›´æ–°ã€‚",
    "embedding_score": 0.19611089561688638,
    "bm25_score": 0.17580146415173578,
    "combined_score": 0.2840116276927543
  },
  {
    "id": 3,
    "title": "ã€æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥15å¤©æŸ¥è¯¢ã€‘-ä¸­å›½å¤©æ°”ç½‘",
    "link": "http://www.baidu.com/link?url=TfG-EXLFNRvSBsfm4VRVAMEXl5eyndnw92A4z7_lG0CSPtS0rYkM8gzPrTYTuEw0l3KDd0F-RkZoY99DLOfFfa",
    "content": "815å¤©å¤©æ°”é¢„æŠ¥ï¼Œæ˜¯é›†åˆå¤šå®¶å…¨çƒæ•°å€¼å¤©æ°”é¢„æŠ¥æ¨¡å¼å®¢è§‚é¢„æŠ¥äº§å“åŠ å·¥è€Œæˆï¼Œæœªç»é¢„æŠ¥å‘˜ä¸»è§‚è®¢æ­£ï¼Œåæ˜ æœªæ¥ä¸€æ®µæ—¶é—´å†…å¤©æ°”å˜åŒ–è¶‹åŠ¿ï¼Œå…·æœ‰ä¸€å®šçš„ä¸ç¡®å®šæ€§ï¼Œä¾›å…¬ä¼—å‚è€ƒï¼Œæ¬²çŸ¥æ›´åŠ å‡†ç¡®çš„å¤©æ°”é¢„æŠ¥éœ€éšæ—¶å…³æ³¨çŸ­æœŸå¤©æ°”é¢„æŠ¥å’Œæœ€æ–°é¢„æŠ¥ä¿¡æ¯æ›´æ–°ã€‚",
    "embedding_score": 0.19611089561688638,
    "bm25_score": 0.17580146415173578,
    "combined_score": 0.2840116276927543
  },
  {
    "id": 7,
    "title": "æ­¦æ±‰å¤©æ°”é¢„æŠ¥30å¤©_æ­¦æ±‰å¤©æ°”é¢„æŠ¥30å¤©æŸ¥è¯¢,æ­¦æ±‰æœªæ¥30å¤©å¤©æ°”é¢„æŠ¥...",
    "link": "http://www.baidu.com/link?url=TfG-EXLFNRvSBsfm4VRVAWFU6147uEbDgUVLG-qUd5Ai7YBoUTlMLdibAue8C9Ry",
    "content": "äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816",
    "embedding_score": 0.18021423574936474,
    "bm25_score": 0.17302561640099984,
    "combined_score": 0.2667270439498647
  }
] (Line: 139 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Selected top 2 pages for query 'æ­¦æ±‰æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥'. (Line: 141 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Processing 8 pages for query: 'Wuhan 7-day weather forecast' (Line: 117 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Calculating embedding similarities... (Line: 120 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Calculating BM25 similarities... (Line: 125 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Sorted pages: [
  {
    "id": 7,
    "title": "Wuhan, Hubei, China 14 day weather forecast",
    "link": "https://www.timeanddate.com/weather/china/wuhan/ext",
    "content": "Wuhan Extended Forecast with high and low temperatures",
    "embedding_score": 0.15420699756773787,
    "bm25_score": 0.7224972907393906,
    "combined_score": 0.5154556429374332
  },
  {
    "id": 4,
    "title": "10-day weather forecast for Hongshan District, Hubei, People's ...",
    "link": "https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047",
    "content": "Day Morning showers. High 32C. Winds NNE at 5 to 10 mph. Chance of rain 60. Night Showers late at night. Low 25C. Winds NNE at 5 to 10 mph. Chance of rain 30.",
    "embedding_score": 0.12989005661516864,
    "bm25_score": 0.21239299208715134,
    "combined_score": 0.23608655265874431
  },
  {
    "id": 0,
    "title": "10-Day Weather Forecast for Wuhan, Hubei, People's Republic of ...",
    "link": "https://weather.com/weather/tenday/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8?traffic_source=footerNav_Tenday",
    "content": "Day Chance of a shower or two during the morning, followed by partly cloudy skies in the afternoon. High around 95F. Winds NE at 5 to 10 mph. Chance of rain 30. Night Cloudy with showers. Low near 80F. Winds light and variable. Chance of rain 50.",
    "embedding_score": 0.14824898265009764,
    "bm25_score": 0.013862316337873121,
    "combined_score": 0.1551801408190342
  },
  {
    "id": 9,
    "title": "Wuhan - BBC Weather",
    "link": "https://www.bbc.com/weather/1791247",
    "content": "Sunny , 0 chance of precipitation , Wind speed 8 mph 12 kmh SSW 8 mph 12 kmh South South Westerly , More detailsÃ‚",
    "embedding_score": 0.13673424709748838,
    "bm25_score": 0.017701650555801487,
    "combined_score": 0.14558507237538912
  },
  {
    "id": 2,
    "title": "Monthly Weather Forecast for Wuhan, Hubei, People's Republic of ...",
    "link": "https://weather.com/weather/monthly/l/2637660151899903e8cbdd23636051470b6731863286ec74b3033421cb87e1e8",
    "content": "Night Partly cloudy. Low 84F. Winds S at 10 to 15 mph.",
    "embedding_score": 0.13648371951123486,
    "bm25_score": 0.009991398590584835,
    "combined_score": 0.14147941880652729
  },
  {
    "id": 5,
    "title": "Wuhan, Hubei, China Weather Forecast | AccuWeather",
    "link": "https://www.accuweather.com/en/cn/wuhan/103847/weather-forecast/103847",
    "content": "Static Radar Temporarily Unavailable Thank you for your patience as we work to get everything up and running again. Refresh Page",
    "embedding_score": 0.127640437260298,
    "bm25_score": 0.009953810264566581,
    "combined_score": 0.1326173423925813
  },
  {
    "id": 6,
    "title": "Quantifying the influence of temperature on hand, foot and mouth ...",
    "link": "https://www.nature.com/articles/s41598-018-20318-z",
    "content": "Chan, K. P. et al . Epidemic hand, foot and mouth disease caused by human enterovirus 71, Singapore. Emerging infectious diseases 9 , 7885, 2003.     Yang, S. et al . Epidemiological features of and changes in incidence of infectious diseases in China in the first decade after the SARS outbreak: an observational trend study. The Lancet. Infectious diseases , 2017. Chong, P., Liu, C. C., Chow, Y. H., Chou, A. H.  Klein, M. Review of enterovirus 71 vaccines. Clinical infectious diseases: an offici...",
    "embedding_score": 0.08744120880017262,
    "bm25_score": 0.006800808092473206,
    "combined_score": 0.09084161284640922
  },
  {
    "id": 8,
    "title": "The association between ambient temperature and mortality of the ...",
    "link": "https://bmcpublichealth.biomedcentral.com/articles/10.1186/s12889-020-10131-7",
    "content": "Jones KE, Patel NG, Levy MA, Storeygard A, Balk D, Gittleman JL, et al. Global trends in emerging infectious diseases. Nature. 2008;4517181:9903. .      Malvy D, McElroy AK, de Clerck H, Gnther S, van Griensven J. Ebola virus disease. Lancet. 2019;39310174:93648. .    Brachman PS. Infectious diseases  past, present, and future. Int J Epidemiol. 2003;325:6846. .    Farrar J. Science, innovation and society: what we need to prepare for the health challenges of the twentyfirst century? Int Health. ...",
    "embedding_score": 0.07935435049780203,
    "bm25_score": 0.006799733332158877,
    "combined_score": 0.08275421716388147
  }
] (Line: 139 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): Selected top 2 pages for query 'Wuhan 7-day weather forecast'. (Line: 141 [pages_retrieve.py])
INFO (2025-08-19 16:37:47): retreival_context:[
  {
    "id": 4,
    "title": "æ­¦æ±‰å¤©æ°”é¢„æŠ¥ä¸€å‘¨,7å¤©,10å¤©,15å¤©,æœªæ¥ä¸€å‘¨å¤©æ°”é¢„æŠ¥æŸ¥è¯¢_2345å¤©æ°”...",
    "link": "http://www.baidu.com/link?url=w9bksBGQLagd8gLb77csdDtAxNCkJivPCnaFe5k5HBspTDuL0TgQmGfaaA1_Skf_r-6LJ6U0VETQBkeSI9tBvo8pI0OHxT4Kp4MVKn3YLB7",
    "content": "ä»Šæ—¥ç”Ÿæ´»æŒ‡æ•° æ— éœ€å¸¦ä¼ å°‘å‘æ„Ÿå†’ ç´«å¤–çº¿å¾ˆå¼º è¾ƒé€‚å®œæ™¨ç»ƒ é€‚å®œæ™¾æ™’ ä¸é€‚å®œé’“é±¼ è¾ƒé€‚å®œæ—…æ¸¸ é«˜æ¸©æ’è¡Œæ¦œ",
    "embedding_score": 0.22863875738387213,
    "bm25_score": 0.2512857251872719,
    "combined_score": 0.35428161997750807
  },
  {
    "id": 8,
    "title": "...å¤©æ°”é¢„æŠ¥ä¸€å‘¨,æ­¦æ±‰æœªæ¥ä¸€å‘¨å¤©æ°”,æ­¦æ±‰7å¤©å¤©æ°”é¢„æŠ¥æŸ¥è¯¢ - ä¸œæ–¹å¤©æ°”",
    "link": "http://www.baidu.com/link?url=KYLFmYHJc0hRaD2NwrwSP5WUeMazpz2sMRbXZa2fr__TQUGbIfGhdYqWDTAxzvl1",
    "content": "äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816",
    "embedding_score": 0.19892521563299026,
    "bm25_score": 0.22408573010825664,
    "combined_score": 0.31096808068711856
  },
  {
    "id": 7,
    "title": "Wuhan, Hubei, China 14 day weather forecast",
    "link": "https://www.timeanddate.com/weather/china/wuhan/ext",
    "content": "Wuhan Extended Forecast with high and low temperatures",
    "embedding_score": 0.15420699756773787,
    "bm25_score": 0.7224972907393906,
    "combined_score": 0.5154556429374332
  },
  {
    "id": 4,
    "title": "10-day weather forecast for Hongshan District, Hubei, People's ...",
    "link": "https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047",
    "content": "Day Morning showers. High 32C. Winds NNE at 5 to 10 mph. Chance of rain 60. Night Showers late at night. Low 25C. Winds NNE at 5 to 10 mph. Chance of rain 30.",
    "embedding_score": 0.12989005661516864,
    "bm25_score": 0.21239299208715134,
    "combined_score": 0.23608655265874431
  }
] (Line: 120 [response.py])
INFO (2025-08-19 16:37:47): response_stage_messages:[
  {
    "role": "system",
    "content": "# Role and Goal\n        You are a top-tier AI Search Analyst. Your primary mission is to provide the user with a comprehensive, accurate, and critically-evaluated answer. You must synthesize and deeply analyze the provided search results, not just summarize them.\n        You will be provided with the following information:\n        1.  **CURRENT_DATE**: The current date,if user's question is  related to current date,you should use it.\n        2.  **IMPLICIT_QUESTIONS**: The underlying, deeper questions inferred from the user's query, which reveal their true intent.\n        3.  **SEARCH_RESULTS**: A list of web pages containing a `Title`, `Content`. Treat this as raw, unverified data that requires rigorous scrutiny.\n\n        **Step 1: Deconstruct the User's Need**\n        -   Thoroughly analyze the `USER_QUERY` and all `IMPLICIT_QUESTIONS`. This is the key to understanding the full scope of what the user wants to know. Your final answer must address all of these points.\n\n        **Step 2: Critically Evaluate the Search Results**\n        -   **NEVER blindly trust the search results.** Your core value lies in your ability to analyze and vet information.\n        -   **Cross-Validate Information**: Compare all search sources to identify points of consensus and disagreement.\n        -   **Identify Contradictions**: If different sources provide conflicting information, you MUST explicitly point out these discrepancies in your answer. If possible, offer a plausible explanation for the conflict (e.g., different timeframes, differing perspectives, or reporting errors).\n        -   **Assess Information Quality**: A well-reasoned article with specific data is more credible than a simple, unsubstantiated claim. Note when a source appears to be of low quality.\n        -   **Identify Information Gaps**: If the search results are incomplete or cannot fully answer the user's question, state this clearly and specify what information is missing.\n\n        **Step 3: Synthesize a High-Value Answer**\n        -   **Structure Your Answer Logically**: Begin with a direct answer, then provide a detailed explanation using headings, lists, and bold text for clarity.\n        -   **Synthesize, Don't List**: Weave the validated information from multiple sources into a single, coherent, and easy-to-understand narrative. Your output should be a new piece of value-added content.\n        -   **Maintain an Objective, Analytical Tone**: Clearly present facts and distinguish them from speculation or conflicting reports.\n        -   Your answer must use the same language as the user's question.\n        -   The final output must be a well-written, thoughtful, and comprehensive response that directly answers the user's explicit and implicit questions.\n        -   The answer must be grounded in the provided search results but elevated by your critical analysis.\n        -   If there is not enough information to provide a definitive answer, explain why and what information is missing.\n        \n        CURRENT_DATE:\n        2025-08-19\n\n        IMPLICIT_QUESTIONS:\n        [\n  \"æ­¦æ±‰æ¥ä¸‹æ¥ä¸€å‘¨çš„å¤©æ°”å˜åŒ–è¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ\",\n  \"æ­¦æ±‰æœªæ¥7å¤©æ˜¯å¦æœ‰é™é›¨æˆ–é«˜æ¸©é¢„è­¦ï¼Ÿ\"\n]\n\n        SEARCH_RESULTS:\n        [\n  {\n    \"Title\": \"æ­¦æ±‰å¤©æ°”é¢„æŠ¥ä¸€å‘¨,7å¤©,10å¤©,15å¤©,æœªæ¥ä¸€å‘¨å¤©æ°”é¢„æŠ¥æŸ¥è¯¢_2345å¤©æ°”...\",\n    \"Content\": \"ä»Šæ—¥ç”Ÿæ´»æŒ‡æ•° æ— éœ€å¸¦ä¼ å°‘å‘æ„Ÿå†’ ç´«å¤–çº¿å¾ˆå¼º è¾ƒé€‚å®œæ™¨ç»ƒ é€‚å®œæ™¾æ™’ ä¸é€‚å®œé’“é±¼ è¾ƒé€‚å®œæ—…æ¸¸ é«˜æ¸©æ’è¡Œæ¦œ\"\n  },\n  {\n    \"Title\": \"...å¤©æ°”é¢„æŠ¥ä¸€å‘¨,æ­¦æ±‰æœªæ¥ä¸€å‘¨å¤©æ°”,æ­¦æ±‰7å¤©å¤©æ°”é¢„æŠ¥æŸ¥è¯¢ - ä¸œæ–¹å¤©æ°”\",\n    \"Content\": \"äº‘å—å­©ç«¥å¤´éƒ¨åˆºå…¥å°åˆ€è¢«é€åŒ»ï¼šå·²åŠæ—¶æ‰‹æœ¯ æ­£ä½é™¢æ²»ç–— 8æœˆ15æ—¥,æœ‰ç½‘å‹å‘å¸ƒè§†é¢‘ç§°ï¼Œåœ¨äº‘å—ä¸€å¤„åŒ»é™¢é—¨å£ï¼Œä¸€åâ€œå¤´ä¸Šæ’åˆ€â€çš„å¥³å­©è¢«æ¯äº²å¸¦ç€èµ°äº†è¿›æ¥ï¼Œè¿™å¥³å­©å¹´é¾„çœ‹èµ·æ¥å¹¶ä¸å¤§ï¼Œè€Œå¥¹çš„å¤´ä¸Šï¼Œæ’ç€ä¸€æŠŠæ°´æœåˆ€ã€‚ 20250816\"\n  },\n  {\n    \"Title\": \"Wuhan, Hubei, China 14 day weather forecast\",\n    \"Content\": \"Wuhan Extended Forecast with high and low temperatures\"\n  },\n  {\n    \"Title\": \"10-day weather forecast for Hongshan District, Hubei, People's ...\",\n    \"Content\": \"Day Morning showers. High 32C. Winds NNE at 5 to 10 mph. Chance of rain 60. Night Showers late at night. Low 25C. Winds NNE at 5 to 10 mph. Chance of rain 30.\"\n  }\n]\n        \n        \n        \n        "
  },
  {
    "role": "user",
    "content": "hi"
  },
  {
    "role": "assistant",
    "content": "ä½ å¥½ï¼æˆ‘æ˜¯TinyAISearchï¼Œç”±ä¹ä¹å¼€å‘ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼ŸğŸ˜Š"
  },
  {
    "role": "user",
    "content": "æœªæ¥7å¤©æ­¦æ±‰å¤©æ°”"
  }
] (Line: 178 [response.py])
INFO (2025-08-19 16:37:47): å¼€å§‹è°ƒç”¨LLM API (search_generate)... (Line: 182 [response.py])
INFO (2025-08-19 16:37:47): LLM APIè°ƒç”¨å®Œæˆ (search_generate)ï¼Œè€—æ—¶: 0.41ç§’ (Line: 194 [response.py])
INFO (2025-08-19 16:37:47): æ”¶åˆ°ç¬¬ä¸€ä¸ªchunk (search_generate)ï¼Œæ€»è€—æ—¶: 0.41ç§’ (Line: 199 [response.py])
INFO (2025-08-19 16:37:54): æµå¼å“åº”å®Œæˆ (search_generate)ï¼Œæ€»å…±å¤„ç†äº†124ä¸ªchunks (Line: 213 [response.py])
INFO (2025-08-19 16:37:54): å‚è€ƒæ¥æº: [
  {
    "æ­¦æ±‰å¤©æ°”é¢„æŠ¥ä¸€å‘¨,7å¤©,10å¤©,15å¤©,æœªæ¥ä¸€å‘¨å¤©æ°”é¢„æŠ¥æŸ¥è¯¢_2345å¤©æ°”...": "http://www.baidu.com/link?url=w9bksBGQLagd8gLb77csdDtAxNCkJivPCnaFe5k5HBspTDuL0TgQmGfaaA1_Skf_r-6LJ6U0VETQBkeSI9tBvo8pI0OHxT4Kp4MVKn3YLB7"
  },
  {
    "...å¤©æ°”é¢„æŠ¥ä¸€å‘¨,æ­¦æ±‰æœªæ¥ä¸€å‘¨å¤©æ°”,æ­¦æ±‰7å¤©å¤©æ°”é¢„æŠ¥æŸ¥è¯¢ - ä¸œæ–¹å¤©æ°”": "http://www.baidu.com/link?url=KYLFmYHJc0hRaD2NwrwSP5WUeMazpz2sMRbXZa2fr__TQUGbIfGhdYqWDTAxzvl1"
  },
  {
    "Wuhan, Hubei, China 14 day weather forecast": "https://www.timeanddate.com/weather/china/wuhan/ext"
  },
  {
    "10-day weather forecast for Hongshan District, Hubei, People's ...": "https://weather.com/en-GB/weather/tenday/l/Hongshan+District+Hubei+People's+Republic+of+China?canonicalCityId=6debf3e8305ae96ebf69decbaea7f047"
  }
] (Line: 365 [AISearchServer.py])
INFO (2025-08-19 16:37:54): åŠ©æ‰‹å›å¤åŠå‚è€ƒæ¥æºå·²æ·»åŠ è‡³ä¼šè¯ af76f4b7-f3b4-40ef-bcee-e111d278db47 (Line: 372 [AISearchServer.py])
